# 作品管理页面设置指南

## 📦 完成的工作

已成功创建基于用户角色的作品管理系统：

### 1. **主页面**
`/app/(main)/artworks/page.tsx`
- 根据用户角色动态渲染不同组件
- 处理未登录状态
- 加载状态显示

### 2. **组件**

#### 👤 普通用户引导页
`/components/artworks/user-artworks-guide.tsx`
- 引导用户申请成为艺术家
- 展示平台特性和优势
- 申请流程说明
- 平台数据统计

#### 🎨 艺术家作品列表
`/components/artworks/artist-artworks-list.tsx`
- 显示艺术家所有作品
- 按状态分类（全部/待审核/已发布/已拒绝）
- 发布新作品入口
- 作品编辑和管理功能

#### 👨‍💼 管理员审核中心
`/components/artworks/admin-artworks-review.tsx`
- 审核待审核作品
- 按状态过滤作品
- 通过/拒绝作品功能
- 统计数据展示

### 3. **UI 组件**
- `/components/ui/badge.tsx` - 徽章组件
- `/components/ui/tabs.tsx` - 标签页组件
- `/hooks/use-toast.ts` - Toast 提示 hook

### 4. **导航更新**
`/components/layout/navbar.tsx`
- 更新导航为："首页 | 艺术品市场 | 作品管理"
- "作品管理"链接到 `/artworks`

---

## 🔧 安装依赖

由于你的 Node.js 版本较旧（12.18.3），需要先更新 Node.js，然后安装缺失的依赖：

### 1. 更新 Node.js（推荐）

```bash
# 使用 nvm 安装最新 LTS 版本
nvm install --lts
nvm use --lts

# 或直接从官网下载安装
# https://nodejs.org/
```

### 2. 安装缺失的依赖

```bash
npm install @radix-ui/react-tabs
```

---

## 🎯 页面路由说明

| URL | 普通用户 | 艺术家 | 管理员 |
|-----|---------|--------|--------|
| `/artworks` | 引导页 + 申请入口 | 作品列表 | 审核中心 |
| `/apply-artist` | 申请成为艺术家表单 | - | - |
| `/artist/submit` | ❌ | 发布新作品表单 | ✅ |
| `/artist/artworks/[id]/edit` | ❌ | 编辑作品 | ✅ |
| `/artworks/[id]` | 查看详情 | 查看/编辑 | 查看/审核 |

---

## 📋 待实现功能

以下功能目前仅有前端界面，需要连接 Supabase 后端：

### 1. **数据获取**
- [ ] 从 Supabase 获取作品列表
- [ ] 从 Supabase 获取艺术家信息
- [ ] 实时更新作品状态

### 2. **作品管理**
- [ ] 发布新作品功能 (`/artist/submit`)
- [ ] 编辑作品功能
- [ ] 删除作品功能
- [ ] 作品图片上传（Pinata IPFS）

### 3. **审核功能**
- [ ] 管理员通过/拒绝作品
- [ ] 审核备注保存
- [ ] 通知艺术家审核结果
- [ ] 审核通过后自动铸造 NFT

### 4. **艺术家申请**
- [ ] 创建 `/apply-artist` 申请表单页面
- [ ] 艺术家资料提交
- [ ] 上传作品集
- [ ] 管理员审核艺术家申请

---

## 🧪 测试步骤

### 1. 启动开发服务器

```bash
npm run dev
```

### 2. 测试不同角色

在 Supabase SQL Editor 中切换角色：

```sql
-- 切换为普通用户
UPDATE users SET role = 'user' WHERE privy_user_id = '你的ID';

-- 切换为艺术家
UPDATE users SET role = 'artist' WHERE privy_user_id = '你的ID';

-- 切换为管理员
UPDATE users SET role = 'admin' WHERE privy_user_id = '你的ID';
```

### 3. 访问页面

- 登录后访问：`http://localhost:3000/artworks`
- 查看不同角色看到的不同界面

---

## 🎨 页面截图预览

### 普通用户 - 引导页
```
┌────────────────────────────────────┐
│   [画笔图标]                        │
│   成为艺术家，发布你的作品           │
│   加入创作者社区，转化数字资产...    │
│                                    │
│   [立即申请成为艺术家]               │
│                                    │
│   [发布作品] [铸造NFT]               │
│   [获得收益] [版权保护]              │
│                                    │
│   如何开始？                        │
│   1. 提交申请                      │
│   2. 等待审核                      │
│   3. 开始创作                      │
└────────────────────────────────────┘
```

### 艺术家 - 作品列表
```
┌────────────────────────────────────┐
│  我的作品      [+ 发布新作品]        │
├────────────────────────────────────┤
│  [全部(3)] [待审核(1)] [已发布(2)]   │
├────────────────────────────────────┤
│  [作品卡片1]  [作品卡片2]            │
│  [待审核]     [已发布]               │
│  [查看] [编辑] [查看] [更多]         │
└────────────────────────────────────┘
```

### 管理员 - 审核中心
```
┌────────────────────────────────────┐
│  作品审核中心                        │
├────────────────────────────────────┤
│  [待审核: 5] [已通过: 12] [已拒绝: 3]│
├────────────────────────────────────┤
│  [待审核(5)] [已通过] [已拒绝] [全部]│
├────────────────────────────────────┤
│  ┌──────────────────────────────┐  │
│  │ [作品图片] 作品标题            │  │
│  │            艺术家: XXX        │  │
│  │            [查看] [通过] [拒绝]│  │
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

---

## 🔗 相关文件

- 导航组件: `/components/layout/navbar.tsx`
- 用户菜单: `/components/layout/user-menu.tsx`
- 用户认证: `/lib/hooks/useAuth.ts`
- 数据库文档: `/docs/DATABASE_SCHEMA.md`
- 测试指南: `/docs/NAVIGATION_TESTING.md`

---

## 🚀 下一步

1. 安装 `@radix-ui/react-tabs` 依赖
2. 创建 `/apply-artist` 艺术家申请页面
3. 创建 `/artist/submit` 作品发布页面
4. 连接 Supabase 实现数据获取和更新
5. 实现图片上传功能（Pinata IPFS）
6. 实现 NFT 铸造流程

---

**文档版本**: v1.0
**最后更新**: 2026-01-30
